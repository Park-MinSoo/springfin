<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="resource.BoardMapper">
	<select id="selectBoard" resultType="vo.BoardVO">
		select id, writer, title, content, to_char(writedate,'rrrr-mm-dd') writedate, cnt, tup from board where type=#{type} order by id
	</select>

	<select id="searchBoard" parameterType="java.util.HashMap"
		resultType="vo.BoardVO">
		select id, writer, title, content, to_char(writedate,'rrrr-mm-dd')
		writedate, cnt, tup from board where ${searchType} like'%'||#{keyword}||'%'
	</select>

	<select id="selectone" resultType="vo.BoardVO">
		select id, writer, title, content, to_char(writedate,'rrrr-mm-dd') writedate, cnt, tup from board where id=#{id}
	</select>

	<insert id="insertBoard" parameterType="vo.BoardVO">
		<selectKey resultType="int" keyProperty="id" order="BEFORE">
			select board_seq.nextval from dual
		</selectKey>
		insert into board (id, writer, title, content, writedate, type) values
		(#{id}, #{writer}, #{title}, #{content}, to_date(sysdate,
		'rrrr-mm-dd'), #{type})
	</insert>

	<delete id="deleteBoard" parameterType="_int">
		delete from board where id= #{id}
	</delete>

	<update id="updateBoard" parameterType="vo.BoardVO">
		update board set
		title = #{title}, content = #{content}, writedate =	to_date(sysdate, 'rrrr-mm-dd')
		where id = #{id}
	</update>

	<update id="updatecntBoard" parameterType="vo.BoardVO">
		update board set cnt=#{cnt}+1
		where id = #{id}
	</update>

	<select id="selectwriterBoard" resultType="vo.BoardVO">
		select id, writer, title, content, to_char(writedate,'rrrr-mm-dd'),
		cnt, tup from board where writer=#{writer}
	</select>

</mapper>





